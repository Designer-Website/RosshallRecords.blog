<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rosshall Records</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Lora&family=Montserrat&display=swap" rel="stylesheet">

    <link rel="shortcut icon" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
</head>
<body>

    <!-- This website is made by me, Akrit -->

    <header>
        <div>
            <p>Rosshall Records</p>
            <ul>
                <li><a href="index.html" class="activeLink">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="search.html">Search</a></li>
            </ul>
        </div>
    </header>

    <!-- <div class="loader" id="loader"><div class="loading"><p> Loading...</p></div></div> -->

    <section id="First">
        <p class="Latest">LATEST</p>
        <div class="gridFirst">


            <div class="Card1" id="Post1">
                <div class="Card1Image">
                    <img id="Post1Image" class="Card1ImageStyle" src="https://images.unsplash.com/photo-1468434453985-b1ca3b555f00?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                </div>
                <div class="Card1Content">
                    <div class="Card1Top">
                        <p class="Card1Date" id="Post1Date"></p>
                        <h1 class="Card1Title" id="Post1Title"></h1>
                        <p class="Card1Text" id="Post1Text"></p>
                    </div>
                    <div class="Card1Bottom">
                        <p><a  id="Post1Link" href="#" class="Card1Link">Read More</a></p>
                    </div>
                </div>
            </div>


            <div class="Card2" id="Post2">
                <div class="Card2Top">
                    <div class="Card2Image">
                        <img id="Post2Image" class="Card2ImageStyle" src="https://images.unsplash.com/photo-1589691962030-8d2b7f2a1ffe?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                    </div>
                </div>
                <div class="Card2Bottom">
                    <p id="Post2Date" class="Card2Date"></p>
                    <h1  class="Card2Title"><a id="Post2Title" href="#" class="Card2Link"></a></h1>
                </div>
            </div>

            <div class="Card2" id="Post3">
                <div class="Card2Top">
                    <div class="Card2Image">
                        <img id="Post3Image" class="Card2ImageStyle" src="https://images.unsplash.com/photo-1545121436-87364761152c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                    </div>
                </div>
                <div class="Card2Bottom">
                    <p id="Post3Date" class="Card2Date"></p>
                    <h1  class="Card2Title"><a id="Post3Title" href="#" class="Card2Link"></a></h1>
                </div>
            </div>

            <div class="Card3" id="Post4">
                <div class="Card3Image">
                    <img id="Post4Image" class="Card3ImageStyle" src="https://images.unsplash.com/photo-1468434453985-b1ca3b555f00?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                </div>
                <div class="Card3Content">
                    <div class="Card3Top">
                        <p id="Post4Date" class="Card3Date"></p>
                        <h1 id="Post4Title" class="Card3Title"></h1>
                        <p id="Post4Text" class="Card3Text"></p>
                    </div>
                    <div class="Card3Bottom">
                        <p><a id="Post4Link" href="#" class="Card3Link">Read More</a></p>
                    </div>
                </div>
            </div>

            <div class="Card3" id="Post5">
                <div class="Card3Image">
                    <img id="Post5Image" class="Card3ImageStyle" src="https://images.unsplash.com/photo-1468434453985-b1ca3b555f00?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                </div>
                <div class="Card3Content">
                    <div class="Card3Top">
                        <p id="Post5Date" class="Card3Date"></p>
                        <h1 id="Post5Title" class="Card3Title"></h1>
                        <p id="Post5Text" class="Card3Text"></p>
                    </div>
                    <div class="Card3Bottom">
                        <p><a id="Post5Link" href="#" class="Card3Link">Read More</a></p>
                    </div>
                </div>
            </div>



        </div>
    </section>

    <div class="Label">FEATURED</div>

    <section>
        <div class="gridFeatured">
            <div class="Card3" id="FeaturedPost1" >
                <div class="Card3Image">
                    <img id="FeaturedPost1Image"  class="Card3ImageStyle" src="https://images.unsplash.com/photo-1468434453985-b1ca3b555f00?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                </div>
                <div class="Card3Content">
                    <div class="Card3Top">
                        <p id="FeaturedPost1Date" class="Card3Date"></p>
                        <h1 id="FeaturedPost1Title" class="Card3Title"></h1>
                        <p id="FeaturedPost1Text" class="Card3Text"></p>
                    </div>
                    <div class="Card3Bottom">
                        <p><a id="FeaturedPost1Link" href="#" class="Card3Link">Read More</a></p>
                    </div>
                </div>
            </div>

            <div class="Card3" id="FeaturedPost2">
                <div class="Card3Image">
                    <img id="FeaturedPost2Image" class="Card3ImageStyle" src="https://images.unsplash.com/photo-1468434453985-b1ca3b555f00?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                </div>
                <div class="Card3Content">
                    <div class="Card3Top">
                        <p id="FeaturedPost2Date" class="Card3Date"></p>
                        <h1 id="FeaturedPost2Title" class="Card3Title"></h1>
                        <p id="FeaturedPost2Text" class="Card3Text"></p>
                    </div>
                    <div class="Card3Bottom">
                        <p><a id="FeaturedPost2Link" href="#" class="Card3Link">Read More</a></p>
                    </div>
                </div>
            </div>

            <div class="Card3" id="FeaturedPost3" > 
                <div class="Card3Image">
                    <img id="FeaturedPost3Image" class="Card3ImageStyle" src="https://images.unsplash.com/photo-1468434453985-b1ca3b555f00?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                </div>
                <div class="Card3Content">
                    <div class="Card3Top">
                        <p id="FeaturedPost3Date" class="Card3Date"></p>
                        <h1 id="FeaturedPost3Title" class="Card3Title"></h1>
                        <p id="FeaturedPost3Text" class="Card3Text"></p>
                    </div>
                    <div class="Card3Bottom">
                        <p><a id="FeaturedPost3Link" href="#" class="Card3Link">Read More</a></p>
                    </div>
                </div>
            </div>

            <div class="Card3" id="FeaturedPost4">
                <div class="Card3Image">
                    <img id="FeaturedPost4Image" class="Card3ImageStyle" src="https://images.unsplash.com/photo-1468434453985-b1ca3b555f00?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                </div>
                <div class="Card3Content">
                    <div class="Card3Top">
                        <p id="FeaturedPost4Date" class="Card3Date"></p>
                        <h1 id="FeaturedPost4Title" class="Card3Title"></h1>
                        <p id="FeaturedPost4Text" class="Card3Text"></p>
                    </div>
                    <div class="Card3Bottom">
                        <p><a id="FeaturedPost4Link" href="#" class="Card3Link">Read More</a></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="Label">More Posts</div>

    <section>
        <p class="More">MORE</p>
        <div class="gridMorePosts">
            
            <div class="Card1" id="Post6">
                <div class="Card1Image">
                    <img id="Post6Image" class="Card1ImageStyle" src="https://images.unsplash.com/photo-1468434453985-b1ca3b555f00?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                </div>
                <div class="Card1Content">
                    <div class="Card1Top">
                        <p id="Post6Date" class="Card1Date"></p>
                        <h1 id="Post6Title" class="Card1Title"></h1>
                        <p id="Post6Text" class="Card1Text"></p>
                    </div>
                    <div class="Card1Bottom">
                        <p><a id="Post6Link" href="#" class="Card1Link">Read More</a></p>
                    </div>
                </div>
            </div>


            <div class="Card2" id="Post7">
                <div class="Card2Top">
                    <div class="Card2Image">
                        <img id="Post7Image" class="Card2ImageStyle" src="https://images.unsplash.com/photo-1589691962030-8d2b7f2a1ffe?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                    </div>
                </div>
                <div class="Card2Bottom">
                    <p id="Post7Date" class="Card2Date"></p>
                    <h1 class="Card2Title"><a  id="Post7Title" href="#" class="Card2Link"></a></h1>
                </div>
            </div>

            <div class="Card2" id="Post8">
                <div class="Card2Top">
                    <div class="Card2Image">
                        <img id="Post8Image" class="Card2ImageStyle" src="https://images.unsplash.com/photo-1545121436-87364761152c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80" alt="">
                    </div>
                </div>
                <div class="Card2Bottom">
                    <div class="Card2Content">
                        <p id="Post8Date" class="Card2Date"></p>
                        <h1 class="Card2Title"><a  id="Post8Title" href="#" class="Card2Link"></a></h1>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer><p class="gold">Rosshall Records 2020</p><p>Rosshall Academy 131 Crookston Road, Glasgow G52 3PD</p><p>Email: RosshallRecords@NeedsAnEmail.sch.uk</p></footer>
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js" integrity="sha256-lrZTgsdM1iVdRigETFOU8u8/BmLX1ysQ8bzrULbuVFU="
    crossorigin="anonymous"></script>

  <script>
    let state = {
      posts: [],
      baseUrl: 'https://blogs.glowscotland.org.uk/gc/rosshallrecords/wp-json/wp/v2/posts',
      perPage: '?_embed'
    //   wpFetchHeaders: {
    //     headers: {
    //       'Access-Control-Allow-Origin': '*',
    //       'Access-Control-Expose-Headers': 'x-wp-total'
    //     }
    //   }
    }

    async function getNumPosts() {
      const { headers } = await axios(`${state.baseUrl}${state.perPage}`,)
      return headers['x-wp-totalpages']
    }

    async function fetchPosts(numPages) {
      const posts = []

      for (let page = 1; page <= numPages; page += 1) {
        const post = axios.get(`${state.baseUrl}${state.perPage}&page=${page}`, state.wpFetchHeaders)
        posts.push(post)
      }

      await axios.all(posts).then((response) => {
        const postData = response.map(res => res.data)
        state.posts = postData.flat()
      }).catch(e => console.log('error fetching posts: ', e))

      return true
    }

    state.posts = getNumPosts()
      .then(numPosts => fetchPosts(numPosts))
      .then((data) => {
        // console.log('data ', state)


        // console.log(state.posts[0])

   
    var monthNames = [ "January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December" ];

    // Post 1
    // getting featured images by source_url document.getElementById("Post1Image").src = state.posts[0]._embedded['wp:featuredmedia'][0].source_url;
    var newDate1 = new Date(state.posts[0].date);

    document.getElementById("Post1Image").src = state.posts[0]._embedded['wp:featuredmedia'][0].alt_text;
    document.getElementById("Post1Title").innerHTML = state.posts[0].title.rendered;
    document.getElementById("Post1Text").innerHTML = state.posts[0].excerpt.rendered;
    document.getElementById("Post1Date").innerHTML = monthNames[newDate1.getMonth()] + ' ' + newDate1.getDate();
    document.getElementById("Post1Link").href = 'post.html' + '?postId=' + state.posts[0].id;

    // Post 2
    var newDate2 = new Date(state.posts[1].date);

    document.getElementById("Post2Image").src = state.posts[1]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("Post2Title").innerHTML = state.posts[1].title.rendered;
    // document.getElementById("Post2Text").innerHTML = state.posts[0].excerpt.rendered;
    document.getElementById("Post2Date").innerHTML = monthNames[newDate2.getMonth()] + ' ' + newDate2.getDate();
    document.getElementById("Post2Title").href = 'post.html' + '?postId=' + state.posts[1].id;

    // Post 3
    var newDate3 = new Date(state.posts[2].date);

    document.getElementById("Post3Image").src = state.posts[2]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("Post3Title").innerHTML = state.posts[2].title.rendered;
    // document.getElementById("Post3Text").innerHTML = state.posts[0].excerpt.rendered;
    document.getElementById("Post3Date").innerHTML = monthNames[newDate3.getMonth()] + ' ' + newDate3.getDate();
    document.getElementById("Post3Title").href = 'post.html' + '?postId=' + state.posts[2].id;
    
    // Post 4
    var newDate4 = new Date(state.posts[3].date);

    document.getElementById("Post4Image").src = state.posts[3]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("Post4Title").innerHTML = state.posts[3].title.rendered;
    document.getElementById("Post4Text").innerHTML = state.posts[3].excerpt.rendered;
    document.getElementById("Post4Date").innerHTML = monthNames[newDate4.getMonth()] + ' ' + newDate4.getDate();
    document.getElementById("Post4Link").href = 'post.html' + '?postId=' + state.posts[3].id;
    
    // Post 5
    var newDate5 = new Date(state.posts[4].date);

    document.getElementById("Post5Image").src = state.posts[4]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("Post5Title").innerHTML = state.posts[4].title.rendered;
    document.getElementById("Post5Text").innerHTML = state.posts[4].excerpt.rendered;
    document.getElementById("Post5Date").innerHTML = monthNames[newDate5.getMonth()] + ' ' + newDate5.getDate();
    document.getElementById("Post5Link").href = 'post.html' + '?postId=' + state.posts[4].id;

    // Post 6
    var newDate6 = new Date(state.posts[5].date);

    document.getElementById("Post6Image").src = state.posts[5]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("Post6Title").innerHTML = state.posts[5].title.rendered;
    document.getElementById("Post6Text").innerHTML = state.posts[5].excerpt.rendered;
    document.getElementById("Post6Date").innerHTML = monthNames[newDate6.getMonth()] + ' ' + newDate6.getDate();
    document.getElementById("Post6Link").href = 'post.html' + '?postId=' + state.posts[5].id;

    // Post 7
    var newDate7 = new Date(state.posts[6].date);

    document.getElementById("Post7Image").src = state.posts[6]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("Post7Title").innerHTML = state.posts[6].title.rendered;
    // document.getElementById("Post3Text").innerHTML = state.posts[0].excerpt.rendered;
    document.getElementById("Post7Date").innerHTML = monthNames[newDate7.getMonth()] + ' ' + newDate7.getDate();
    document.getElementById("Post7Title").href = 'post.html' + '?postId=' + state.posts[6].id;

    // Post 5
    var newDate8 = new Date(state.posts[7].date);

    document.getElementById("Post8Image").src = state.posts[7]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("Post8Title").innerHTML = state.posts[7].title.rendered;
    // document.getElementById("Post3Text").innerHTML = state.posts[0].excerpt.rendered;
    document.getElementById("Post8Date").innerHTML = monthNames[newDate8.getMonth()] + ' ' + newDate8.getDate();
    document.getElementById("Post8Title").href = 'post.html' + '?postId=' + state.posts[7].id;

    // document.getElementById("loader").style.display = "none";

      })




  </script>

<script>
    let state2 = {
      posts: [],
      baseUrl: 'https://blogs.glowscotland.org.uk/gc/rosshallrecords/wp-json/wp/v2/posts',
      perPage: '?_embed&tags=9'
    //   To find out tag id use this rest endpoint on browser https://blogs.glowscotland.org.uk/gc/rosshallrecords/wp-json/wp/v2/tags
    // 
    
    
    
    
    //   wpFetchHeaders: {
    //     headers: {
    //       'Access-Control-Allow-Origin': '*',
    //       'Access-Control-Expose-Headers': 'x-wp-total'
    //     }
    //   }
    }

    async function getNumPosts2() {
      const { headers } = await axios(`${state2.baseUrl}${state2.perPage}`,)
      return headers['x-wp-totalpages']
    }

    async function fetchPosts2(numPages) {
      const posts = []

      for (let page = 1; page <= numPages; page += 1) {
        const post = axios.get(`${state2.baseUrl}${state2.perPage}&page=${page}`, state2.wpFetchHeaders)
        posts.push(post)
      }

      await axios.all(posts).then((response) => {
        const postData = response.map(res => res.data)
        state2.posts = postData.flat()
      }).catch(e => console.log('error fetching posts: ', e))

      return true
    }

    state2.posts = getNumPosts2()
      .then(numPosts => fetchPosts2(numPosts))
      .then((data) => {
        // console.log('data ', state2)


        // console.log(state2.posts[0])

   
    var monthNames = [ "January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December" ];

    // Post 1
    var newDate11 = new Date(state2.posts[0].date);

    document.getElementById("FeaturedPost1Image").src = state2.posts[0]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("FeaturedPost1Title").innerHTML = state2.posts[0].title.rendered;
    document.getElementById("FeaturedPost1Text").innerHTML = state2.posts[0].excerpt.rendered;
    document.getElementById("FeaturedPost1Date").innerHTML = monthNames[newDate11.getMonth()] + ' ' + newDate11.getDate();
    document.getElementById("FeaturedPost1Link").href = 'post.html' + '?postId=' + state2.posts[0].id;

    // Post 2
    var newDate22 = new Date(state2.posts[1].date);

    document.getElementById("FeaturedPost2Image").src = state2.posts[1]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("FeaturedPost2Title").innerHTML = state2.posts[1].title.rendered;
    document.getElementById("FeaturedPost2Text").innerHTML = state2.posts[1].excerpt.rendered;
    document.getElementById("FeaturedPost2Date").innerHTML = monthNames[newDate22.getMonth()] + ' ' + newDate22.getDate();
    document.getElementById("FeaturedPost2Link").href = 'post.html' + '?postId=' + state2.posts[1].id;

    // Post 3
    var newDate33 = new Date(state2.posts[2].date);

    document.getElementById("FeaturedPost3Image").src = state2.posts[2]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("FeaturedPost3Title").innerHTML = state2.posts[2].title.rendered;
    document.getElementById("FeaturedPost3Text").innerHTML = state2.posts[2].excerpt.rendered;
    document.getElementById("FeaturedPost3Date").innerHTML = monthNames[newDate33.getMonth()] + ' ' + newDate33.getDate();
    document.getElementById("FeaturedPost3Link").href = 'post.html' + '?postId=' + state2.posts[2].id;
    
    // Post 4
    var newDate44 = new Date(state2.posts[3].date);

    document.getElementById("FeaturedPost4Image").src = state2.posts[3]._embedded['wp:featuredmedia'][0].source_url;
    document.getElementById("FeaturedPost4Title").innerHTML = state2.posts[3].title.rendered;
    document.getElementById("FeaturedPost4Text").innerHTML = state2.posts[3].excerpt.rendered;
    document.getElementById("FeaturedPost4Date").innerHTML = monthNames[newDate44.getMonth()] + ' ' + newDate44.getDate();
    document.getElementById("FeaturedPost4Link").href = 'post.html' + '?postId=' + state2.posts[3].id;

    // document.getElementById("loader").style.display = "none";

      })




  </script>

</body>
</html>